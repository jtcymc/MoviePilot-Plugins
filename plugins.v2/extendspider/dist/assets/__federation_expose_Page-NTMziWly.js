import{importShared as O}from"./__federation_fn_import-E6wRZccp.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const{toDisplayString:i,createTextVNode:d,resolveComponent:n,withCtx:t,createVNode:e,openBlock:a,createBlock:p,createCommentVNode:w,createElementVNode:o,renderList:V,Fragment:S,createElementBlock:u}=await O("vue"),$={class:"plugin-page"},tt={key:2},et={class:"text-h4 font-weight-bold"},lt={class:"text-h4 font-weight-bold text-success"},ot={class:"text-h4 font-weight-bold text-warning"},nt={class:"text-h4 font-weight-bold text-info"},st={key:0,class:"mt-4"},at={key:1,class:"mt-4"},it={key:2,class:"mt-4"},rt={class:"d-flex align-center"},dt={class:"font-weight-medium"},ct={class:"text-caption text-secondary"},ut={class:"mt-4 text-subtitle-2"},{ref:h,onMounted:_t,computed:L}=await O("vue"),mt={__name:"Page",props:{model:{type:Object,default:()=>({title:"爬虫详情",stats:{total:0,enabled:0,disabled:0,tags:[],spider_urls:{}},recentItems:[]})},api:{type:Object,default:()=>{}}},emits:["action","switch","close"],setup(B,{emit:F}){const _=B,f=h(!0),g=h(null),C=h("running"),E=h(""),c=L(()=>_.model.stats),I=L(()=>_.model.recentItems),N=F;function P(s){return{movie:"mdi-movie",tv:"mdi-television-classic",download:"mdi-download",error:"mdi-alert-circle",success:"mdi-check-circle"}[s]||"mdi-information"}function z(s){return{movie:"blue",tv:"green",download:"purple",error:"red",success:"success"}[s]||"grey"}async function D(){f.value=!0,g.value=null;try{const s=await _.api.get("plugin/ExtendSpider/status");s&&(_.model.stats={total:s.total||0,enabled:s.enabled||0,disabled:s.disabled||0,tags:s.tags||[],spider_urls:s.spider_urls||{}},C.value=s.status||"running",E.value=new Date().toLocaleString()),_.model.recentItems=await _.api.get("plugin/ExtendSpider/history")||[]}catch(s){console.error("获取数据失败:",s),g.value=s.message||"获取数据失败"}finally{f.value=!1,N("action")}}function T(){N("switch")}function M(){N("close")}return _t(()=>{D()}),(s,l)=>{const U=n("v-card-title"),x=n("v-icon"),y=n("v-btn"),q=n("v-card-item"),A=n("v-alert"),G=n("v-skeleton-loader"),m=n("v-card-text"),v=n("v-card"),b=n("v-col"),H=n("v-row"),j=n("v-chip"),J=n("v-chip-group"),K=n("v-list-item"),Q=n("v-list"),R=n("v-timeline-item"),W=n("v-timeline"),X=n("v-spacer"),Y=n("v-card-actions");return a(),u("div",$,[e(v,null,{default:t(()=>[e(q,null,{append:t(()=>[e(y,{icon:"",color:"primary",variant:"text",onClick:M},{default:t(()=>[e(x,{left:""},{default:t(()=>l[0]||(l[0]=[d("mdi-close")])),_:1})]),_:1})]),default:t(()=>[e(U,null,{default:t(()=>[d(i(B.model.title),1)]),_:1})]),_:1}),e(m,null,{default:t(()=>[g.value?(a(),p(A,{key:0,type:"error",class:"mb-4"},{default:t(()=>[d(i(g.value),1)]),_:1})):w("",!0),f.value?(a(),p(G,{key:1,type:"card"})):(a(),u("div",tt,[e(H,null,{default:t(()=>[e(b,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(v,{variant:"outlined",class:"text-center"},{default:t(()=>[e(m,null,{default:t(()=>[o("div",et,i(c.value.total),1),l[1]||(l[1]=o("div",{class:"text-subtitle-1"},"爬虫总数",-1))]),_:1})]),_:1})]),_:1}),e(b,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(v,{variant:"outlined",class:"text-center"},{default:t(()=>[e(m,null,{default:t(()=>[o("div",lt,i(c.value.enabled),1),l[2]||(l[2]=o("div",{class:"text-subtitle-1"},"已启用",-1))]),_:1})]),_:1})]),_:1}),e(b,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(v,{variant:"outlined",class:"text-center"},{default:t(()=>[e(m,null,{default:t(()=>[o("div",ot,i(c.value.disabled),1),l[3]||(l[3]=o("div",{class:"text-subtitle-1"},"已禁用",-1))]),_:1})]),_:1})]),_:1}),e(b,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(v,{variant:"outlined",class:"text-center"},{default:t(()=>[e(m,null,{default:t(()=>[o("div",nt,i(c.value.tags.length),1),l[4]||(l[4]=o("div",{class:"text-subtitle-1"},"标签数量",-1))]),_:1})]),_:1})]),_:1})]),_:1}),c.value.tags.length?(a(),u("div",st,[l[5]||(l[5]=o("div",{class:"text-h6 mb-2"},"标签列表",-1)),e(J,null,{default:t(()=>[(a(!0),u(S,null,V(c.value.tags,r=>(a(),p(j,{key:r,color:"primary",variant:"outlined",class:"ma-1"},{default:t(()=>[d(i(r),1)]),_:2},1024))),128))]),_:1})])):w("",!0),c.value.spider_urls&&Object.keys(c.value.spider_urls).length?(a(),u("div",at,[l[6]||(l[6]=o("div",{class:"text-h6 mb-2"},"爬虫网址",-1)),e(Q,{density:"compact"},{default:t(()=>[(a(!0),u(S,null,V(c.value.spider_urls,(r,k)=>(a(),p(K,{key:k,title:k,subtitle:r},{append:t(()=>[e(y,{icon:"mdi-open-in-new",variant:"text",size:"small",href:r,target:"_blank"},null,8,["href"])]),_:2},1032,["title","subtitle"]))),128))]),_:1})])):w("",!0),I.value&&I.value.length?(a(),u("div",it,[l[7]||(l[7]=o("div",{class:"text-h6 mb-2"},"最近记录",-1)),e(W,{density:"compact"},{default:t(()=>[(a(!0),u(S,null,V(I.value,(r,k)=>(a(),p(R,{key:k,"dot-color":z(r.type),size:"small"},{default:t(()=>[o("div",rt,[e(x,{color:z(r.type),size:"small",class:"mr-2"},{default:t(()=>[d(i(P(r.type)),1)]),_:2},1032,["color"]),o("span",dt,i(r.title),1)]),o("div",ct,i(r.time),1)]),_:2},1032,["dot-color"]))),128))]),_:1})])):w("",!0),o("div",ut,[o("div",null,[l[8]||(l[8]=o("strong",null,"状态:",-1)),e(j,{size:"small",color:C.value==="running"?"success":"warning"},{default:t(()=>[d(i(C.value),1)]),_:1},8,["color"])]),o("div",null,[l[9]||(l[9]=o("strong",null,"最后更新:",-1)),d(" "+i(E.value),1)])])]))]),_:1}),e(Y,null,{default:t(()=>[e(y,{color:"primary",onClick:D,loading:f.value},{default:t(()=>[e(x,{left:""},{default:t(()=>l[10]||(l[10]=[d("mdi-refresh")])),_:1}),l[11]||(l[11]=d(" 刷新数据 "))]),_:1},8,["loading"]),e(X),e(y,{color:"primary",onClick:T},{default:t(()=>[e(x,{left:""},{default:t(()=>l[12]||(l[12]=[d("mdi-cog")])),_:1}),l[13]||(l[13]=d(" 配置 "))]),_:1})]),_:1})]),_:1})])}}},ft=Z(mt,[["__scopeId","data-v-4cb560cd"]]);export{ft as default};
